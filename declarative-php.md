---
title: "Декларативное ООП, переводы"
date: 2018-06-24
tags: ооп
description: |
  Декларативный PHP или Объектный PHP - заметки
keywords:
  - декларативное и императивное программирование
  - объекты и классы
  - объектно ориентированное программирование на PHP
---

# Декларативный PHP (он же Объектный PHP)

Программист сейчас -- это переводчик языка заказчика на язык машины.
Декларативный подход, позволяет формулировать программу терминами предметнеой области, 
**описывая результат**, а не процесс его достижения.

Фактически, читая декларативный код за ним не сложно увидеть тех-задание,
если читать процедурный код, это будет сделать гораздо сложнее.

На текущий момент не существует языков "тех.заданий", когда машина будет
понимать, что нужно сделать прочитав ТЗ. Декларативный подход - это переходная
парадигма от машинных языков к естественным.

## Основные принципы

- Декларативность вместо имеративности &mdash; программа описывает результат, а не перечисялет инструкции, как его достичь
(инструкции понятны компьютерам, результат понятен людям);
- Проектирование от предметной области (результата), а не от данных; (сначала проектруют базу, потом классы,
получается data-driven design, вместо **domain driven**)
- Имена объектов отвечают на вопрос **Кто**, а не _Что он делает_ (объекты это представители сущностей предметной области);
- Объекты **компактны**: несколько методов, в конструкторах несколько параметров до 5-7;
- Объекты **неизменны** (immutable);
- Объекты расширяются декораторами (не наследованием) (why? and why?);
- Объекты и декораторы легко стыкуются благодаря **общим интерфейсам**;
- Легкие конструкторы: не содержат кода, только инициализация состояния;
- Не используется null (why?);
- Не используются статические методы, в том числе приватные (это аналог глобальных функций и процедур);
- нет сеттеров и геттеров;
- Не используется instanceof, type casting или рефлексия;
- Все публичные методы объявлены в интерфейсе;
- Все проверки в юнит-тестах только ``assertThat`` (why?)
- Группировка композиции объектов с помощью ``Объектов оболочек`` (Deocrating Envelopes/Wraps)
аналог: группировки при создании векторных изображений - несколько линий сгруппировали, получилась фигрура)
- Расширяющие/Уточняющие интерфейсы (Smart) - позволяют 

## Преимущества

- Повышается поддерживаемость
  - все объекты это термины предметной области (не путать с сущностью в БД!);
  - все объекты компактные их легко читать;
- Забудьте про костыли, их больше нет.
- Адаптивность: объектный код гораздо легче поддается изменениям; изменения это по сути реконфигурация готовых объектов;
- Програмирование делится на две фазы:
  - программирование - создание новых объектов;
  - конфигурирование - композиция объектов, т.е. их сочетание описывающее результат;
- Повышение надежности
  - легкое создание юнит-тестов, т.к. [бъекты неизменяемые immutable](https://wiki.php.net/rfc/immutability)
  - очень компактные (до 5 методов)
  
## Пример


## Патерны

### Декоратор 

Наращивает или видоимзеняет возможности базового объекта.

### Оболочка (Envelope)

Содединяет несколько объектов в группу.

### Отложенная загрузка (Lazy Loading)

Позволяет избавиться от исполняемого кода в конструкторах

### Smart-объекты

Дополняют функционал объекта.


## Что такое хорошо и что такое плохо?

С точки зрения описываемого подхода:

**Плохо**: null, static, extends, trait, singleton, new вне конструктора

**Хорошо**: interface, immutable, final, class


## Источники

- [Object Thinking by David West](https://read.amazon.com/kp/embed?asin=B00JDMPOKM&preview=newtab&linkCode=kpe&ref_=cm_sw_r_kb_dp_GG2lBbQ6SRBHK&tag=agdp-20)
- [Yegor Bugaenko Blog](https://www.yegor256.com/)
